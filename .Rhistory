'Valmistus ja prosessi' = "pros tt",
'Toimisto ja myynti' =  "tsto & aspal tt",
'Toimisto ja myynti' =  "pal, myynti & hoito tt",
'Rakennus' = "rakennus tt"),
amma_val = fct_other(amma_val, keep = c('Erityisasiantuntijat', 'Asiantuntijat',
'Valmistus ja prosessi', 'Toimisto ja myynti', 'Rakennus'),
other_level = "Muut"),
aluetyyppi_tp = fct_rev(aluetyyppi_tp)) %>%
group_by(time, aluetyyppi, aluetyyppi_tp, amma_val) %>%
summarise(N = sum(N)) %>%
group_by(time, aluetyyppi_tp, amma_val) %>%
summarise(pend_osuus = 100 * sum(N[!(aluetyyppi == aluetyyppi_tp)], na.rm = TRUE) / sum(N, na.rm = TRUE)) %>%
group_by(aluetyyppi_tp, amma_val) %>%
summarise(pend_osuus_muutos = (pend_osuus[time == max(time)] - pend_osuus[time == 2000])) %>%
ungroup() %>%
ggplot(aes(aluetyyppi_tp, pend_osuus_muutos)) +
facet_wrap(~ amma_val) +
geom_col() +
geom_hline(yintercept = 0) +
coord_flip() +
labs(x = "%-yksikköä", y = NULL,
title = "Muista kunnista työssäkäyvien osuuden muutos 2000-2015 ammateittain")
dat_sum_amma3 %>%
mutate(amma3 = replace_na(as.character(amma3), "Muut")) %>%
mutate(amma_val = fct_recode(amma3,
'Erityisasiantuntijat' = "erityisasiantuntijat",
'Asiantuntijat' = "asiantuntijat",
'Valmistus ja prosessi' = "korj & valm tt",
'Valmistus ja prosessi' = "pros tt",
'Toimisto ja myynti' =  "tsto & aspal tt",
'Toimisto ja myynti' =  "pal, myynti & hoito tt",
'Rakennus' = "rakennus tt"),
amma_val = fct_other(amma_val, keep = c('Erityisasiantuntijat', 'Asiantuntijat',
'Valmistus ja prosessi', 'Toimisto ja myynti', 'Rakennus'),
other_level = "Muut"),
aluetyyppi_tp = fct_rev(aluetyyppi_tp)) %>%
group_by(time, aluetyyppi, aluetyyppi_tp, amma_val) %>%
summarise(N = sum(N)) %>%
group_by(time, aluetyyppi_tp, amma_val) %>%
summarise(pend_osuus = 100 * sum(N[!(aluetyyppi == aluetyyppi_tp)], na.rm = TRUE) / sum(N, na.rm = TRUE)) %>%
group_by(aluetyyppi_tp, amma_val) %>%
summarise(pend_osuus_muutos = (pend_osuus[time == max(time)] - pend_osuus[time == 2000])) %>%
ungroup() %>%
ggplot(aes(aluetyyppi_tp, pend_osuus_muutos)) +
facet_wrap(~ amma_val, nrow = 1) +
geom_col() +
geom_hline(yintercept = 0) +
coord_flip() +
labs(x = "%-yksikköä", y = NULL,
title = "Muista kunnista työssäkäyvien osuuden muutos 2000-2015 ammateittain")
ggsave("pend_amma_val.png", height = 6, width = 12)
ggsave("pend_amma_val.png", height = 5, width = 16)
set_ptt(base_size = 16)
dat_sum_amma3 %>%
mutate(amma3 = replace_na(as.character(amma3), "Muut")) %>%
mutate(amma_val = fct_recode(amma3,
'Erityisasiantuntijat' = "erityisasiantuntijat",
'Asiantuntijat' = "asiantuntijat",
'Valmistus ja prosessi' = "korj & valm tt",
'Valmistus ja prosessi' = "pros tt",
'Toimisto ja myynti' =  "tsto & aspal tt",
'Toimisto ja myynti' =  "pal, myynti & hoito tt",
'Rakennus' = "rakennus tt"),
amma_val = fct_other(amma_val, keep = c('Erityisasiantuntijat', 'Asiantuntijat',
'Valmistus ja prosessi', 'Toimisto ja myynti', 'Rakennus'),
other_level = "Muut"),
aluetyyppi_tp = fct_rev(aluetyyppi_tp)) %>%
group_by(time, aluetyyppi, aluetyyppi_tp, amma_val) %>%
summarise(N = sum(N)) %>%
group_by(time, aluetyyppi_tp, amma_val) %>%
summarise(pend_osuus = 100 * sum(N[!(aluetyyppi == aluetyyppi_tp)], na.rm = TRUE) / sum(N, na.rm = TRUE)) %>%
group_by(aluetyyppi_tp, amma_val) %>%
summarise(pend_osuus_muutos = (pend_osuus[time == max(time)] - pend_osuus[time == 2000])) %>%
ungroup() %>%
ggplot(aes(aluetyyppi_tp, pend_osuus_muutos)) +
facet_wrap(~ amma_val, nrow = 1) +
geom_col() +
geom_hline(yintercept = 0) +
coord_flip() +
labs(x = "%-yksikköä", y = NULL,
title = "Muista kunnista työssäkäyvien osuuden muutos 2000-2015 ammateittain")
dat_sum_amma3 %>%
mutate(amma3 = replace_na(as.character(amma3), "Muut")) %>%
mutate(amma_val = fct_recode(amma3,
'Erityisasiantuntijat' = "erityisasiantuntijat",
'Asiantuntijat' = "asiantuntijat",
'Valmistus ja prosessi' = "korj & valm tt",
'Valmistus ja prosessi' = "pros tt",
'Toimisto ja myynti' =  "tsto & aspal tt",
'Toimisto ja myynti' =  "pal, myynti & hoito tt",
'Rakennus' = "rakennus tt"),
amma_val = fct_other(amma_val, keep = c('Erityisasiantuntijat', 'Asiantuntijat',
'Valmistus ja prosessi', 'Toimisto ja myynti', 'Rakennus'),
other_level = "Muut"),
aluetyyppi_tp = fct_rev(aluetyyppi_tp)) %>%
group_by(time, aluetyyppi, aluetyyppi_tp, amma_val) %>%
summarise(N = sum(N)) %>%
group_by(time, aluetyyppi_tp, amma_val) %>%
summarise(pend_osuus = 100 * sum(N[!(aluetyyppi == aluetyyppi_tp)], na.rm = TRUE) / sum(N, na.rm = TRUE)) %>%
group_by(aluetyyppi_tp, amma_val) %>%
summarise(pend_osuus_muutos = (pend_osuus[time == max(time)] - pend_osuus[time == 2000])) %>%
ungroup() %>%
ggplot(aes(aluetyyppi_tp, pend_osuus_muutos)) +
facet_wrap(~ amma_val, nrow = 1) +
geom_col() +
geom_hline(yintercept = 0) +
coord_flip() +
labs(x = "%-yksikköä", y = NULL,
title = "Muista kunnista työssäkäyvien osuuden muutos 2000-2015 ammateittain")
ggsave("pend_amma_val.png", height = 6, width = 16)
set_ptt(base_size = 18)
theme_update(plot.subtitle = element_text(colour = "grey50", size = 12))
dat_sum_amma3 %>%
mutate(amma3 = replace_na(as.character(amma3), "Muut")) %>%
mutate(amma_val = fct_recode(amma3,
'Erityisasiantuntijat' = "erityisasiantuntijat",
'Asiantuntijat' = "asiantuntijat",
'Valmistus ja prosessi' = "korj & valm tt",
'Valmistus ja prosessi' = "pros tt",
'Toimisto ja myynti' =  "tsto & aspal tt",
'Toimisto ja myynti' =  "pal, myynti & hoito tt",
'Rakennus' = "rakennus tt"),
amma_val = fct_other(amma_val, keep = c('Erityisasiantuntijat', 'Asiantuntijat',
'Valmistus ja prosessi', 'Toimisto ja myynti', 'Rakennus'),
other_level = "Muut"),
aluetyyppi_tp = fct_rev(aluetyyppi_tp)) %>%
group_by(time, aluetyyppi, aluetyyppi_tp, amma_val) %>%
summarise(N = sum(N)) %>%
group_by(time, aluetyyppi_tp, amma_val) %>%
summarise(pend_osuus = 100 * sum(N[!(aluetyyppi == aluetyyppi_tp)], na.rm = TRUE) / sum(N, na.rm = TRUE)) %>%
group_by(aluetyyppi_tp, amma_val) %>%
summarise(pend_osuus_muutos = (pend_osuus[time == max(time)] - pend_osuus[time == 2000])) %>%
ungroup() %>%
ggplot(aes(aluetyyppi_tp, pend_osuus_muutos)) +
facet_wrap(~ amma_val, nrow = 1) +
geom_col() +
geom_hline(yintercept = 0) +
coord_flip() +
labs(y = "%-yksikköä", x = NULL,
title = "Muista kunnista työssäkäyvien osuuden muutos 2000-2015 ammateittain alueilla keskimäärin")
ggsave("pend_amma_val.png", height = 6, width = 16)
dat_sum_amma3 %>%
mutate(amma3 = replace_na(as.character(amma3), "Muut")) %>%
mutate(amma_val = fct_recode(amma3,
'Erityisasiantuntijat' = "erityisasiantuntijat",
'Asiantuntijat' = "asiantuntijat",
'Valmistus ja prosessi' = "korj & valm tt",
'Valmistus ja prosessi' = "pros tt",
'Toimisto ja myynti' =  "tsto & aspal tt",
'Toimisto ja myynti' =  "pal, myynti & hoito tt",
'Rakennus' = "rakennus tt"),
amma_val = fct_other(amma_val, keep = c('Erityisasiantuntijat', 'Asiantuntijat',
'Valmistus ja prosessi', 'Toimisto ja myynti', 'Rakennus'),
other_level = "Muut"),
aluetyyppi_tp = fct_rev(aluetyyppi_tp)) %>%
group_by(time, aluetyyppi_tp, amma_val) %>%
summarise(N = sum(N)) %>%
ungroup() %>%
ggplot(aes(time, N, colour = aluetyyppi_tp)) +
facet_wrap(~ amma_val, scales = "free")+
geom_line() +
geom_hline(yintercept = 0) +
coord_flip() +
labs(y = "%-yksikköä", x = NULL,
title = "Muista kunnista työssäkäyvien osuuden muutos 2000-2015 ammateittain alueilla keskimäärin")
dat_sum_amma3 %>%
mutate(amma3 = replace_na(as.character(amma3), "Muut")) %>%
mutate(amma_val = fct_recode(amma3,
'Erityisasiantuntijat' = "erityisasiantuntijat",
'Asiantuntijat' = "asiantuntijat",
'Valmistus ja prosessi' = "korj & valm tt",
'Valmistus ja prosessi' = "pros tt",
'Toimisto ja myynti' =  "tsto & aspal tt",
'Toimisto ja myynti' =  "pal, myynti & hoito tt",
'Rakennus' = "rakennus tt"),
amma_val = fct_other(amma_val, keep = c('Erityisasiantuntijat', 'Asiantuntijat',
'Valmistus ja prosessi', 'Toimisto ja myynti', 'Rakennus'),
other_level = "Muut"),
aluetyyppi_tp = fct_rev(aluetyyppi_tp)) %>%
group_by(time, aluetyyppi_tp, amma_val) %>%
summarise(N = sum(N)) %>%
ungroup() %>%
ggplot(aes(time, N, colour = aluetyyppi_tp)) +
facet_wrap(~ amma_val, scales = "free")+
geom_line() +
geom_hline(yintercept = 0)
dat_sum_amma3 %>%
mutate(amma3 = replace_na(as.character(amma3), "Muut")) %>%
mutate(amma_val = fct_recode(amma3,
'Erityisasiantuntijat' = "erityisasiantuntijat",
'Asiantuntijat' = "asiantuntijat",
'Valmistus ja prosessi' = "korj & valm tt",
'Valmistus ja prosessi' = "pros tt",
'Toimisto ja myynti' =  "tsto & aspal tt",
'Toimisto ja myynti' =  "pal, myynti & hoito tt",
'Rakennus' = "rakennus tt"),
amma_val = fct_other(amma_val, keep = c('Erityisasiantuntijat', 'Asiantuntijat',
'Valmistus ja prosessi', 'Toimisto ja myynti', 'Rakennus'),
other_level = "Muut"),
aluetyyppi_tp = fct_rev(aluetyyppi_tp)) %>%
group_by(time, aluetyyppi_tp, amma_val) %>%
summarise(N = sum(N)) %>%
ungroup() %>%
ggplot(aes(time, N, colour = aluetyyppi_tp)) +
facet_wrap(~ amma_val, scales = "free")+
geom_line() +
geom_hline(yintercept = 0)
dir("C:/Users/janne.huovari/Pellervon Taloustutkimus PTT ry/KT162 Alueellinen liikkuvuus ja monipaikkaisuus - General/Jaettu/Ohjausryhmät/Ohjausryhmä 3/Materiaali")
install.packages(c("countrycode", "devtools", "dplyr", "farver", "haven", "MASS", "ncmeta", "openssl", "packrat", "pkgload", "ps", "psych", "raster", "rcmdcheck", "Rcpp", "readr", "remotes", "rgeos", "RJSONIO", "roxygen2", "rsconnect", "sessioninfo", "shiny", "shinyWidgets", "spdep", "survival", "tidyr", "xts"))
# Load data
muuttoaste_data <- readRDS("data/muuttoaste_data.rds")
# Draw plot
ggplot(muuttoaste_data, aes(x = vuosi, y = muuttoja, col = muuton_tyyppi)) +
geom_line() +
theme(legend.title = element_blank()) +
ylab("Muuttoja") +
xlab(NULL) +
#ggtitle("Muuttojen määrä Suomessa 1990 - 2016") +
theme(legend.position = "bottom", legend.justification = "left") +
scale_y_continuous(labels = deci_comma,
breaks = scales::pretty_breaks(n = 6)) +
scale_x_continuous(breaks = scales::pretty_breaks(n = 6)) +
scale_color_discrete(labels = c("Maakuntien väliset muutot",
"Seutukuntien väliset muutot",
"Kuntien väliset muutot",
"Kuntien sisäiset muutot")) +
theme(legend.text = element_text(size = 8))
devtools::load_all(".")
dir("data-raw")
dat_matka_asuinpaikka_aluokka <- haven::read_sav("AsuinKpiMaasAggregate1990_2015.sav")
dat_matka_asuinpaikka_aluokka <- haven::read_sav("data-raw/AsuinKpiMaasAggregate1990_2015.sav")
devtools::load_all(".")
# Työmatkat asuinpaikan mukaan
library(tidyverse)
dat_matka_asuinpaikka_aluokka <- haven::read_sav("data-raw/AsuinKpiMaasAggregate1990_2015.sav") %>%
mutate(time = readr::parse_number(vuosi))
dat_matka_asuinpaikka_aluokka <- haven::read_sav("data-raw/AsuinKpiMaasAggregate1990_2015.sav") %>%
mutate(time = readr::parse_number(vuosi),
aluokka = as_factor(LuokkaKaupMaas))
dat_matka_asuinpaikka_aluokka <- haven::read_sav("data-raw/AsuinKpiMaasAggregate1990_2015.sav") %>%
mutate(time = readr::parse_number(vuosi),
aluokka = as_factor(as.character(LuokkaKaupMaas)))
dat_matka_asuinpaikka_aluokka <- haven::read_sav("data-raw/AsuinKpiMaasAggregate1990_2015.sav") %>%
mutate(time = readr::parse_number(vuosi),
aluokka = factor(LuokkaKaupMaas),
tyomatka_asuin = as.numeric(Mean_Väestökm))
dat_matka_asuinpaikka_aluokka <- haven::read_sav("data-raw/AsuinKpiMaasAggregate1990_2015.sav") %>%
mutate(time = readr::parse_number(vuosi),
aluokka = factor(LuokkaKaupMaas),
tyomatka_asuin = as.numeric(Mean_Väestökm)) %>%
select(time, aluokka, tyomatka_asuin)
dat_matka_asuinpaikka_aluokka %>%
ggplot(aes(time, tyomatka_asuin, colour = aluokka)) +
geom_line()
ggptt::set_ptt()
dat_matka_asuinpaikka_aluokka %>%
ggplot(aes(time, tyomatka_asuin, colour = aluokka)) +
geom_line()
dat_matka_asuinpaikka_aluokka %>%
ggplot(aes(time, tyomatka_asuin, colour = aluokka)) +
geom_line()
library(ggptt)
dat_matka_asuinpaikka_aluokka <- haven::read_sav("data-raw/AsuinKpiMaasAggregate1990_2015.sav") %>%
mutate(time = readr::parse_number(vuosi),
aluokka = factor(LuokkaKaupMaas, levels = 1:7,
levels = c("Sisempi kaupunkialue",
"Ulompi kaupunkialue",
"Kaupungin kehysalue",
"Maaseudun paikalliskeskukset",
"Kaupungin läheinen maaseutu",
"Ydinmaaseutu",
"Harvaan asuttu maaseutu")),
tyomatka_asuin = as.numeric(Mean_Väestökm)) %>%
select(time, aluokka, tyomatka_asuin)
dat_matka_asuinpaikka_aluokka <- haven::read_sav("data-raw/AsuinKpiMaasAggregate1990_2015.sav") %>%
mutate(time = readr::parse_number(vuosi),
aluokka = factor(LuokkaKaupMaas, levels = 1:7,
labels = c("Sisempi kaupunkialue",
"Ulompi kaupunkialue",
"Kaupungin kehysalue",
"Maaseudun paikalliskeskukset",
"Kaupungin läheinen maaseutu",
"Ydinmaaseutu",
"Harvaan asuttu maaseutu")),
tyomatka_asuin = as.numeric(Mean_Väestökm)) %>%
select(time, aluokka, tyomatka_asuin)
dat_matka_asuinpaikka_aluokka %>%
ggplot(aes(time, tyomatka_asuin, colour = aluokka)) +
geom_line()
ggptt::set_ptt()
dat_matka_asuinpaikka_aluokka %>%
ggplot(aes(time, tyomatka_asuin, colour = aluokka)) +
geom_line()
dat_matka_tyopaikka_aluokka <- haven::read_sav("data-raw/TyöKpiMaasAggregate1990_2015.sav") %>%
mutate(time = readr::parse_number(vuosi),
aluokka = factor(LuokkaKaupMaas, levels = 1:7,
labels = c("Sisempi kaupunkialue",
"Ulompi kaupunkialue",
"Kaupungin kehysalue",
"Maaseudun paikalliskeskukset",
"Kaupungin läheinen maaseutu",
"Ydinmaaseutu",
"Harvaan asuttu maaseutu")),
tyomatka_asuin = as.numeric(Mean_Väestökm)) %>%
select(time, aluokka, tyomatka_asuin)
dat_matka_tyopaikka_aluokka <- haven::read_sav("data-raw/TyöKpiMaasAggregate1990_2015.sav")
dat_matka_tyopaikka_aluokka <- haven::read_sav("data-raw/TyöKpiMaasAggregate1990_2015.sav") %>%
mutate(time = readr::parse_number(Vuosi),
aluokka = factor(LuokkaKaupMaas, levels = 1:7,
labels = c("Sisempi kaupunkialue",
"Ulompi kaupunkialue",
"Kaupungin kehysalue",
"Maaseudun paikalliskeskukset",
"Kaupungin läheinen maaseutu",
"Ydinmaaseutu",
"Harvaan asuttu maaseutu")),
tyomatka_asuin = as.numeric(Mean_Väestökm)) %>%
select(time, aluokka, tyomatka_asuin)
dat_matka_tyopaikka_aluokka %>%
ggplot(aes(time, tyomatka_asuin, colour = aluokka)) +
geom_line()
dat_matka_asuinpaikka_aluokka <- haven::read_sav("data-raw/AsuinKpiMaasAggregate1990_2015.sav") %>%
mutate(time = readr::parse_number(vuosi),
aluokka = factor(LuokkaKaupMaas, levels = 1:7,
labels = c("Sisempi kaupunkialue",
"Ulompi kaupunkialue",
"Kaupungin kehysalue",
"Maaseudun paikalliskeskukset",
"Kaupungin läheinen maaseutu",
"Ydinmaaseutu",
"Harvaan asuttu maaseutu")),
tyomatka_asuin = as.numeric(Mean_Väestökm)) %>%
select(time, aluokka, tyomatka_asuin)
dat_matka_tyopaikka_aluokka <- haven::read_sav("data-raw/TyöKpiMaasAggregate1990_2015.sav") %>%
mutate(time = readr::parse_number(Vuosi),
aluokka = factor(LuokkaKaupMaas, levels = 1:7,
labels = c("Sisempi kaupunkialue",
"Ulompi kaupunkialue",
"Kaupungin kehysalue",
"Maaseudun paikalliskeskukset",
"Kaupungin läheinen maaseutu",
"Ydinmaaseutu",
"Harvaan asuttu maaseutu")),
tyomatka_asuin = as.numeric(Mean_Väestökm)) %>%
select(time, aluokka, tyomatka_asuin)
dat_matkat_aluokka <-
dat_matka_asuinpaikka_aluokka %>%
left_join(dat_matka_tyopaikka_aluokka)
dat_matka_tyopaikka_aluokka <- haven::read_sav("data-raw/TyöKpiMaasAggregate1990_2015.sav") %>%
mutate(time = readr::parse_number(Vuosi),
aluokka = factor(LuokkaKaupMaas, levels = 1:7,
labels = c("Sisempi kaupunkialue",
"Ulompi kaupunkialue",
"Kaupungin kehysalue",
"Maaseudun paikalliskeskukset",
"Kaupungin läheinen maaseutu",
"Ydinmaaseutu",
"Harvaan asuttu maaseutu")),
tyomatka_tyo = as.numeric(Mean_Väestökm)) %>%
select(time, aluokka, tyomatka_asuin)
dat_matkat_aluokka <-
dat_matka_asuinpaikka_aluokka %>%
left_join(dat_matka_tyopaikka_aluokka)
dat_matka_tyopaikka_aluokka <- haven::read_sav("data-raw/TyöKpiMaasAggregate1990_2015.sav") %>%
mutate(time = readr::parse_number(Vuosi),
aluokka = factor(LuokkaKaupMaas, levels = 1:7,
labels = c("Sisempi kaupunkialue",
"Ulompi kaupunkialue",
"Kaupungin kehysalue",
"Maaseudun paikalliskeskukset",
"Kaupungin läheinen maaseutu",
"Ydinmaaseutu",
"Harvaan asuttu maaseutu")),
tyomatka_tyo = as.numeric(Mean_Väestökm)) %>%
select(time, aluokka, tyomatka_tyo)
dat_matkat_aluokka <-
dat_matka_asuinpaikka_aluokka %>%
left_join(dat_matka_tyopaikka_aluokka)
dat_matkat_aluokka <-
dat_matka_asuinpaikka_aluokka %>%
left_join(dat_matka_tyopaikka_aluokka, by = c("time", "aluokka"))
usethis::use_data(dat_matkat_aluokka, overwrite = TRUE)
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
fig.path = "fig_pendelointi/"
)
library(tidyverse)
library(ggptt)
library(RColorBrewer)
library(glue)
set_ptt(base_size = 18)
theme_update(plot.subtitle = element_text(colour = "grey50", size = 12))
atyyppi_colour <- c(brewer.pal(6, "Oranges")[6:4], brewer.pal(6, "Blues")[6:5] , brewer.pal(6, "Greens")[6:5])
dat("dat_matkat")
data("dat_matkat")
data("dat_matkat_aluokka")
dat_matkat_aluokka %>%
gather(vars, values, tyomatka_asuin, tyomatka_tyo) %>%
ggplot(aes(time, values, colour = aluokka)) +
facet_wrap(~ vars) +
geom_line() +
geom_line()
dat_matkat_aluokka %>%
gather(vars, values, tyomatka_asuin, tyomatka_tyo) %>%
ggplot(aes(time, values, colour = aluokka)) +
facet_wrap(~ vars) +
geom_line() +
geom_ho()
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
fig.path = "fig_pendelointi/"
)
library(tidyverse)
library(ggptt)
library(RColorBrewer)
library(glue)
set_ptt(base_size = 18)
theme_update(plot.subtitle = element_text(colour = "grey50", size = 12))
atyyppi_colour <- c(brewer.pal(6, "Oranges")[6:4], brewer.pal(6, "Blues")[6:5] , brewer.pal(6, "Greens")[6:5])
dat_matkat_aluokka %>%
gather(vars, values, tyomatka_asuin, tyomatka_tyo) %>%
ggplot(aes(time, values, colour = aluokka)) +
facet_wrap(~ vars) +
geom_line() +
geom_h0()
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
fig.path = "fig_pendelointi/",
fig.width = 10,
fig.height = 8
)
dat_matkat_aluokka %>%
gather(vars, values, tyomatka_asuin, tyomatka_tyo) %>%
ggplot(aes(time, values, colour = aluokka)) +
facet_wrap(~ vars) +
geom_line() +
geom_h0()
dat_matkat_aluokka %>%
gather(vars, values, tyomatka_asuin, tyomatka_tyo) %>%
ggplot(aes(time, values, colour = aluokka)) +
facet_wrap(~ vars) +
geom_line() +
geom_h0() +
scale_colour_manual(values = atyyppi_colour)
dat_matkat_aluokka %>%
gather(vars, values, tyomatka_asuin, tyomatka_tyo) %>%
mutate(vars = fct_recode("Asuinpaikan mukaan" = "tyomatka_asuin",
"Tyopaikan mukaan" = "tyomatka_tyo")) %>%
ggplot(aes(time, values, colour = aluokka)) +
facet_wrap(~ vars) +
geom_line() +
geom_h0() +
scale_colour_manual(values = atyyppi_colour)
dat_matkat_aluokka %>%
gather(vars, values, tyomatka_asuin, tyomatka_tyo) %>%
mutate(vars = fct_recode(vars,
"Asuinpaikan mukaan" = "tyomatka_asuin",
"Tyopaikan mukaan" = "tyomatka_tyo")) %>%
ggplot(aes(time, values, colour = aluokka)) +
facet_wrap(~ vars) +
geom_line() +
geom_h0() +
scale_colour_manual(values = atyyppi_colour)
dat_matkat_aluokka %>%
gather(vars, values, tyomatka_asuin, tyomatka_tyo) %>%
mutate(vars = fct_recode(vars,
"Asuinpaikan mukaan" = "tyomatka_asuin",
"Tyopaikan mukaan" = "tyomatka_tyo")) %>%
ggplot(aes(time, values, colour = aluokka)) +
facet_wrap(~ vars) +
geom_line() +
geom_h0() +
scale_colour_manual(values = atyyppi_colour) +
scale_x_continuous(labels = no_century) +
labs(title = "Keskimääräiset työmatkat",
caption = "© YKR / SYKE ja TK 2018",
y = "km") +
the_title_blank(c("x", "l"))
dat_matkat_aluokka %>%
gather(vars, values, tyomatka_asuin, tyomatka_tyo) %>%
mutate(vars = fct_recode(vars,
"Asuinpaikan mukaan" = "tyomatka_asuin",
"Tyopaikan mukaan" = "tyomatka_tyo")) %>%
ggplot(aes(time, values, colour = aluokka)) +
facet_wrap(~ vars) +
geom_line() +
geom_h0() +
scale_colour_manual(values = atyyppi_colour) +
scale_x_continuous(labels = no_century) +
labs(title = "Keskimääräiset työmatkat",
subtitle = "Ruutuaineistosta kaupunki-maaseutuluokituksella"
caption = "© YKR / SYKE ja TK 2018",
dat_matkat_aluokka %>%
gather(vars, values, tyomatka_asuin, tyomatka_tyo) %>%
mutate(vars = fct_recode(vars,
"Asuinpaikan mukaan" = "tyomatka_asuin",
"Tyopaikan mukaan" = "tyomatka_tyo")) %>%
ggplot(aes(time, values, colour = aluokka)) +
facet_wrap(~ vars) +
geom_line() +
geom_h0() +
scale_colour_manual(values = atyyppi_colour) +
scale_x_continuous(labels = no_century) +
labs(title = "Keskimääräiset työmatkat",
subtitle = "Ruutuaineistosta kaupunki-maaseutuluokituksella",
caption = "© YKR / SYKE ja TK 2018",
y = "km") +
the_title_blank(c("x", "l"))
ggsave("matkat.png", height = 8, width = 16)
